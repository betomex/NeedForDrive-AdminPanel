(this.webpackJsonpneedfordriveadmin=this.webpackJsonpneedfordriveadmin||[]).push([[0],{154:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){},179:function(e,t,a){},248:function(e,t,a){},250:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(30),s=a.n(c),r=(a(154),a(110)),i=a(40),o=(a(159),a(23)),l=a(98),d=a(252),j=a(253),u=a(254),b=a(261),O=a(260),m=a(258),h=a(259),p=a(264),x=a(265),f=(a(160),a.p+"static/media/Logo Icon.02d5ddcf.svg"),v=a.p+"static/media/avatar.8845cada.png",g=a(256),N=(a(161),a(65)),T=a.n(N),y=a(80),S=a(35),C=a(81),I=a.n(C),A=I.a.create({baseURL:"https://api-factory.simbirsoft1.com/api",headers:{"X-Api-Factory-Application-Id":"5e25c641099b810b946c5d5b","Access-Control-Allow-Origin":"*","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}),w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return A.get("db/order?page=".concat(e,"&limit=").concat(t))},R=function(e){return{type:"ORDERS/SET_ORDERS_PORTION",payload:e}},_=function(e){return{type:"ORDERS/ORDERS_TOTAL_COUNT",payload:e}},k={orders:[],totalCount:null},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ORDERS/SET_ORDERS_PORTION":return Object(S.a)(Object(S.a)({},e),{},{orders:t.payload});case"ORDERS/ORDERS_TOTAL_COUNT":return Object(S.a)(Object(S.a)({},e),{},{totalCount:t.payload});default:return e}},U=(a(179),a(262)),D=a(263),F=a(6),P=function(e,t){return e?Object(F.jsxs)("div",{className:"orderCarOption",children:[Object(F.jsx)(U.a,{className:"isCarOption"}),Object(F.jsx)("p",{children:t})]}):Object(F.jsxs)("div",{className:"orderCarOption",children:[Object(F.jsx)(D.a,{className:"isNotCarOption"}),Object(F.jsx)("p",{className:"isNotCarOptionText",children:t})]})},H=function(e){var t,a,n,c,s=e.order,r=new Date(null===s||void 0===s?void 0:s.dateFrom),i=new Date(null===s||void 0===s?void 0:s.dateTo);return Object(F.jsxs)("div",{className:"orderContent",children:[Object(F.jsx)("div",{className:"orderImageBlock",children:Object(F.jsx)("img",{src:null===s||void 0===s||null===(t=s.carId)||void 0===t?void 0:t.thumbnail.path,alt:"carImage",className:"orderCarImage"})}),Object(F.jsxs)("div",{className:"orderInfoBlock",children:[Object(F.jsxs)("p",{children:[Object(F.jsx)("span",{children:null===s||void 0===s||null===(a=s.carId)||void 0===a?void 0:a.name})," \u0432 ",Object(F.jsx)("span",{children:null===s||void 0===s||null===(n=s.cityId)||void 0===n?void 0:n.name}),", ",null===s||void 0===s||null===(c=s.pointId)||void 0===c?void 0:c.address]}),Object(F.jsxs)("p",{children:[r.toLocaleString()," \u2014 ",i.toLocaleString()]}),Object(F.jsxs)("p",{children:["\u0426\u0432\u0435\u0442: ",Object(F.jsx)("span",{children:null===s||void 0===s?void 0:s.color})]})]}),Object(F.jsxs)("div",{className:"orderOptionsBlock",children:[P(null===s||void 0===s?void 0:s.isFullTank,"\u041f\u043e\u043b\u043d\u044b\u0439 \u0431\u0430\u043a"),P(null===s||void 0===s?void 0:s.isNeedChildChair,"\u0414\u0435\u0442\u0441\u043a\u043e\u0435 \u043a\u0440\u0435\u0441\u043b\u043e"),P(null===s||void 0===s?void 0:s.isRightWheel,"\u041f\u0440\u0430\u0432\u044b\u0439 \u0440\u0443\u043b\u044c")]}),Object(F.jsx)("div",{className:"orderPriceBlock",children:Object(F.jsxs)("p",{className:"orderPrice",children:[null===s||void 0===s?void 0:s.price," \u20bd"]})})]})},L=function(){var e=Object(n.useState)(1),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(i.b)(),r=Object(i.c)((function(e){return e.orders})),o=r.orders,j=r.totalCount;Object(n.useEffect)((function(){var e;s((e=a,function(){var t=Object(y.a)(T.a.mark((function t(a){var n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e);case 2:n=t.sent,k.totalCount||a(_(n.data.count)),a(R(n.data.data));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}),[a]);return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("h1",{className:"pageTitle",children:"\u0417\u0430\u043a\u0430\u0437\u044b"}),Object(F.jsxs)(d.a.Content,{className:"ordersListContent",children:[Object(F.jsx)("div",{className:"ordersList",children:o.map((function(e){return Object(F.jsx)(H,{order:e},e.id)}))}),Object(F.jsx)(g.a,{total:j,pageSize:20,current:a,showQuickJumper:!0,showTotal:function(e){return"\u0412\u0441\u0435\u0433\u043e ".concat(e," \u0437\u0430\u043a\u0430\u0437\u043e\u0432")},onChange:function(e){c(e)}})]})]})},B=function(){var e=Object(n.useState)(1),t=Object(l.a)(e,2),a=t[0],c=t[1];return Object(F.jsxs)(d.a,{children:[Object(F.jsxs)(j.a,{className:"adminPageHeader",children:[Object(F.jsx)(u.a,{span:3,className:"adminPageCompany",children:Object(F.jsxs)(b.b,{align:"baseline",children:[Object(F.jsx)("img",{src:f,alt:"logo",className:"logoImg"}),Object(F.jsx)("p",{className:"logoTitle",children:"Need For Drive"})]})}),Object(F.jsx)(u.a,{offset:19,span:1,className:"adminPageHeaderNotification",children:Object(F.jsx)(O.a,{count:2,size:"small",children:Object(F.jsx)(p.a,{className:"notificationIcon"})})}),Object(F.jsx)(u.a,{span:1,className:"adminUserAccount",children:Object(F.jsx)(m.a,{src:v})})]}),Object(F.jsxs)(d.a,{children:[Object(F.jsx)(d.a.Sider,{width:250,className:"adminPageSider",children:Object(F.jsxs)(h.a,{mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["sub1"],style:{height:"100%",borderRight:0},onSelect:function(e){c(Number(e.key))},children:[Object(F.jsx)(h.a.Item,{className:"sideMenuItem",icon:Object(F.jsx)(x.a,{}),children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u043a\u0430\u0437\u043e\u0432"},"1"),Object(F.jsx)(h.a.Item,{className:"sideMenuItem",children:"option2"},"2"),Object(F.jsx)(h.a.Item,{className:"sideMenuItem",children:"option3"},"3"),Object(F.jsx)(h.a.Item,{className:"sideMenuItem",children:"option4"},"4")]})}),Object(F.jsx)(d.a,{className:"adminPageContainer",children:1===a&&Object(F.jsx)(L,{})})]})]})},z=(a(248),a(255)),M=a(257),q=a(146),J=a(266),K=a(267),X="0123456789abcdefghijklmnopqrstuvwxyz",Q=I.a.create({baseURL:"https://api-factory.simbirsoft1.com/api",headers:{"X-Api-Factory-Application-Id":"5e25c641099b810b946c5d5b","Access-Control-Allow-Origin":"*","Content-Type":"application/json",Authorization:function(){for(var e="";e.length<7;)e+=X[Math.floor(Math.random()*X.length)];return"Basic ".concat(window.btoa("".concat(e,":").concat("4cbcea96de")))}()}}),V=function(e,t){var a={username:e,password:t};return Q.post("auth/login",a).catch((function(e){return Object(S.a)(Object(S.a)({},e),{},{status:401})}))},W=function(e){return{type:"AUTH/SET_AUTH_DATA",payload:e}},G=function(e){return{type:"AUTH/SET_AUTH_STATUS",payload:e}},Y={isAuth:!1,authStatus:null},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH/SET_AUTH_DATA":return localStorage.setItem("access_token",t.payload.access_token),localStorage.setItem("refresh_token",t.payload.refresh_token),Object(S.a)(Object(S.a)({},e),{},{isAuth:!0});case"AUTH/SET_AUTH_STATUS":return Object(S.a)(Object(S.a)({},e),{},{authStatus:t.payload});default:return e}},$=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.auth.authStatus}));return Object(F.jsx)("div",{className:"loginContainer",children:Object(F.jsxs)("div",{className:"loginContent",children:[Object(F.jsxs)(b.b,{className:"loginHeader",size:"middle",children:[Object(F.jsx)("img",{className:"logo",src:f,alt:"logo"}),Object(F.jsx)("p",{className:"company",children:"Need For Drive"})]}),Object(F.jsxs)("div",{className:"loginCard",children:[Object(F.jsx)("p",{className:"loginTitle",children:"\u0412\u0445\u043e\u0434"}),Object(F.jsxs)(z.a,{name:"loginForm",onFinish:function(t){var a,n;e((a=t.username,n=t.password,function(){var e=Object(y.a)(T.a.mark((function e(t){var c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(a,n);case 2:200===(c=e.sent).status?t(W(c.data)):t(G(c.status));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},initialValues:{remember:!0},children:[Object(F.jsx)(z.a.Item,{className:"formItem",name:"username",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d"}],validateStatus:401===t?"error":null,children:Object(F.jsx)(M.a,{prefix:Object(F.jsx)(J.a,{}),placeholder:"Username",allowClear:!0})}),Object(F.jsx)(z.a.Item,{className:"formItem",name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}],validateStatus:401===t?"error":null,help:401===t?"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c":null,children:Object(F.jsx)(M.a,{prefix:Object(F.jsx)(K.a,{}),type:"password",placeholder:"Password",allowClear:!0})}),Object(F.jsxs)("div",{className:"loginCardFooter",children:[Object(F.jsx)("a",{children:"\u0417\u0430\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f"}),Object(F.jsx)(q.a,{type:"primary",htmlType:"submit",className:"submitButton",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})]})]})})},ee=function(){var e=Object(i.c)((function(e){return e.auth.isAuth}));return Object(F.jsxs)(o.d,{children:[Object(F.jsx)(o.b,{exact:!0,path:"/",render:function(){return Object(F.jsx)(o.a,{to:"/admin"})}}),Object(F.jsx)(o.b,{path:"/admin",render:function(){return e?Object(F.jsx)(B,{}):Object(F.jsx)(o.a,{to:"/login"})}}),Object(F.jsx)(o.b,{path:"/login",render:function(){return e?Object(F.jsx)(o.a,{to:"/admin"}):Object(F.jsx)($,{})}})]})},te=a(102),ae=a(143),ne=Object(te.b)({auth:Z,orders:E}),ce=Object(te.c)(ne,Object(te.a)(ae.a)),se=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,268)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))};s.a.render(Object(F.jsx)(i.a,{store:ce,children:Object(F.jsx)(r.a,{children:Object(F.jsx)(ee,{})})}),document.getElementById("root")),se()}},[[250,1,2]]]);
//# sourceMappingURL=main.e16b440e.chunk.js.map